{% from 'macros.html' import format_form %}
{% extends "base.html" %}

{% block header_imports %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/users.css') }}">
{% endblock %}

{% block content %}


{% if current_user.is_admin or current_user.is_super_admin %}
    <div id="editModal" class="modal">
        {{ format_form(form=form, action=url_for("team_bp.team_view", team_name=team.name), submit_value="Update Team") }}
    </div>
    <div class="create_user text_lightblue">
        <i class="fa fa-plus-square fa-2x"></i>
        <p> <a href="#editModal" rel="modal:open">Edit team</a></p>
    </div>
{% endif %}

{% if team %}
<h2>{{ team.name }}</h2>
{% endif %}

<div class="user_list">
    <div class="list">
        {% if users %}
            {% for user in users %}
            <div class="list_icon_text">
                <i class="fa fa-user-o text_lightblue"></i>
                <p class="text_primary">{{ user.email }}</a></p>
            </div>
            
            <div class="edit_user">
            </div>
            <div class ="delete_user">
                <span class="font_bold text_title"><button onclick="remove_user_from_team('{{team.id}}', '{{user.id}}')">remove</button></span>
                <i class="fa fa-trash"></i>
            </div>    
        {% endfor %}
    {% endif %}

</div>
{% endblock %}

{% block scripts %}
    function remove_user_from_team(team_id, user_id){
        $.ajax({

            url: `/teams/${team_id}/${user_id}`,
            type: 'DELETE',
            success: function (result){
                location.reload();
            }
        });
    }
{% endblock %}